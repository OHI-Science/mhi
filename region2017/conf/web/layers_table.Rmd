---
bibliography: OHI_Hawaii.bib
---

## Layers Table

```{r, echo=FALSE, message=FALSE, warning=FALSE}
## Create layers_table.Rmd from EXCEL file for MHI
## like http://ohi-science.org/ohi-global/layers_table.html

library(tidyverse)
library(stringr)

## layers directories locally relative to region2017/conf/web and on github
dir_layers_gh <- "https://github.com/OHI-Science/mhi/blob/master/region2017/layers"

source(
  "https://raw.githubusercontent.com/OHI-Science/mhi/master/region2017/conf/web/join_layers_csvs.R")



# ## separate multiple refs
# layers_join <- layers_join %>%
#   tidyr::separate(reference, ";")

layers_join_kable <- layers_join %>%
  mutate(Layer = sprintf("[%s](%s/%s)", name, dir_layers_gh, filename_prep),
         Reference = paste0("@", bib)) %>%
  mutate(Reference = str_replace(Reference, "@NA", "")) %>% # blanks if @NAs
  select(Layer, 
         Description = description, 
         Targets = targets, 
         Reference)

##TODO EVA
##update bib column, refs, descriptions of data_layers.csv

knitr::kable(layers_join_kable)
readr::write_csv(layers_join_kable, 'layers_table.csv') # use relative filepath to this RMarkdown doc

```

## References

