---
bibliography: OHI_Hawaii.bib
output: word_document
---

## Layers Table

```{r, echo=FALSE, message=FALSE, warning=FALSE}
## Create layers_table.Rmd from EXCEL file for MHI
## like http://ohi-science.org/ohi-global/layers_table.html

library(tidyverse)
library(stringr)

## layers directories locally relative to region2017/conf/web and on github
dir_layers_gh <- "https://github.com/OHI-Science/mhi/blob/master/region2017/layers"

## read in excel sheet from github.com (so make sure that you push any updates)
prep_data_layers <- "https://raw.githubusercontent.com/OHI-Science/mhi/master/prep/data_layers.csv"
data_layers <- readr::read_csv(prep_data_layers) 


## rename a few columns
layers_info <- data_layers %>%
  dplyr::select(header_layer = `Data Layer`,
                layer_name   = Name,
                Description  = `Brief Description`,
                reference    = Reference,
                Dimension    = Goal,
                filename     = File,
                bib, 
                url) %>%
  arrange(layer_name)

layers_info_kable <- layers_info %>%
  mutate(Layer = sprintf("[%s](%s/%s)", header_layer, dir_layers_gh, filename),
    Reference   = paste0("@", bib)) %>%
  select(Layer, Description, Dimension, Reference)

##TODO EVA
##update bib column, refs, descriptions of data_layers.csv

knitr::kable(layers_info_kable)
readr::write_csv(layers_info_kable, 'layers_table.csv') # use relative filepath to this RMarkdown doc

```

## References

