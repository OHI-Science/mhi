---
output: html_document
---

```{r set up, echo=FALSE, warning=FALSE, error=FALSE, message=FALSE}
library(tidyverse)

## information from layers.csv
key <- "mhi"
dir_scenario_gh <- "https://raw.githubusercontent.com/OHI-Science/mhi/master/region2017"
layers_csv  <- readr::read_csv(file.path(dir_scenario_gh, 'layers.csv'))
layers_web <- sprintf('http://ohi-science.org/%s/layers.html', key)
short_goal_web <- "https://raw.githubusercontent.com/OHI-Science/mhi/master/region2017/conf/web/goals"
```

<!---From Eva:

The global Ocean Health Index developed 10 goals that encompass ocean health: Food Provision, Natural Products, Clean Water, Coastal Protection, Carbon Storage, Biodiversity, Tourism & Recreation, Livelihoods & Economies, Artisanal Fishing Opportunities, and Sense of Place. These goals for the OHI were adapted from the global framework and the ten goals for the Hawaii OHI are Food Provision, Natural Products, Clean Water, Coastal Protection, Biodiversity, Tourism, Livelihoods & Economies, Recreation, Artisanal Fishing Opportunities, and Sense of Place. The Carbon Storage goal is not included in the Hawaii Ocean Health Index as it lacks the necessary information such as extent of seagrasses and carbon storage capacity. Additionally mangroves are present in HawaiÊ»i but are invasive and there is not a consensus on whether to include mangroves for this goal.

<br><br>

Indicators for each goal have been drafted through stakeholder engagement and expert review are available [here](https://goo.gl/1QT68E).

<br><br>

<div style="float: right"> 
<img src="images/ci_28982090_Medium.jpg" width="350px"></div>    
--->


## Food Provision: Fisheries

```{r, echo=FALSE, results='hide'}

        x <- tempfile(fileext = 'Rmd')
        on.exit(unlink(x))
        download.file(file.path(short_goal_web, "FIS.Rmd"), x) 
```
 
```{r, child = x, echo=FALSE, results='asis'} 
 
``` 
### Data used in model

**Status & trend**

```{r, echo=FALSE, warning=FALSE, error=FALSE, results="asis"}
st <- layers_csv %>%
  filter(targets=="FIS") %>%
  mutate(web_name = gsub(" ", "_", name)) %>%
  mutate(web_name = tolower(web_name)) %>%
  mutate(web_name = gsub("/", "", web_name)) %>%
  mutate(info = sprintf("[%s](%s#%s) (%s): %s", name, layers_web, web_name, layer, description))

cat(paste(st$info, collapse="\n\n"))
```

---- 

## Food Provision: Mariculture

```{r, echo=FALSE, results='hide'}

        x <- tempfile(fileext = 'Rmd')
        on.exit(unlink(x))
        download.file(file.path(short_goal_web, "MAR.Rmd"), x) 
```
 
```{r, child = x, echo=FALSE, results='asis'} 
 
``` 
### Data used in model

**Status & trend**

```{r, echo=FALSE, warning=FALSE, error=FALSE, results="asis"}
st <- layers_csv %>%
  filter(targets=="MAR") %>%
  mutate(web_name = gsub(" ", "_", name)) %>%
  mutate(web_name = tolower(web_name)) %>%
  mutate(web_name = gsub("/", "", web_name)) %>%
  mutate(info = sprintf("[%s](%s#%s) (%s): %s", name, layers_web, web_name, layer, description))

cat(paste(st$info, collapse="\n\n"))
```

---- 

## Artisanal Fishing Opportunity 

```{r, echo=FALSE, results='hide'}

        x <- tempfile(fileext = 'Rmd')
        on.exit(unlink(x))
        download.file(file.path(short_goal_web, "AO.Rmd"), x) 
```
 
```{r, child = x, echo=FALSE, results='asis'} 
 
``` 
### Data used in model

**Status & trend**

```{r, echo=FALSE, warning=FALSE, error=FALSE, results="asis"}
st <- layers_csv %>%
  filter(targets=="AO") %>%
  mutate(web_name = gsub(" ", "_", name)) %>%
  mutate(web_name = tolower(web_name)) %>%
  mutate(web_name = gsub("/", "", web_name)) %>%
  mutate(info = sprintf("[%s](%s#%s) (%s): %s", name, layers_web, web_name, layer, description))

cat(paste(st$info, collapse="\n\n"))
```

---- 

## Natural Products

```{r, echo=FALSE, results='hide'}

        x <- tempfile(fileext = 'Rmd')
        on.exit(unlink(x))
        download.file(file.path(short_goal_web, "NP.Rmd"), x) 
```
 
```{r, child = x, echo=FALSE, results='asis'} 
 
``` 
### Data used in model

**Status & trend**

```{r, echo=FALSE, warning=FALSE, error=FALSE, results="asis"}
st <- layers_csv %>%
  filter(targets=="NP") %>%
  mutate(web_name = gsub(" ", "_", name)) %>%
  mutate(web_name = tolower(web_name)) %>%
  mutate(web_name = gsub("/", "", web_name)) %>%
  mutate(info = sprintf("[%s](%s#%s) (%s): %s", name, layers_web, web_name, layer, description))

cat(paste(st$info, collapse="\n\n"))

```

---- 

## Carbon Storage

```{r, echo=FALSE, results='hide'}

        x <- tempfile(fileext = 'Rmd')
        on.exit(unlink(x))
        download.file(file.path(short_goal_web, "CS.Rmd"), x) 
```
 
```{r, child = x, echo=FALSE, results='asis'} 
 
``` 
### Data used in model

**Status & trend**

```{r, echo=FALSE, warning=FALSE, error=FALSE, results="asis"}
st <- layers_csv %>%
  filter(targets=="CS") %>%
  mutate(web_name = gsub(" ", "_", name)) %>%
  mutate(web_name = tolower(web_name)) %>%
  mutate(web_name = gsub("/", "", web_name)) %>%
  mutate(info = sprintf("[%s](%s#%s) (%s): %s", name, layers_web, web_name, layer, description))

cat(paste(st$info, collapse="\n\n"))
```

---- 

## Coastal Protection

```{r, echo=FALSE, results='hide'}

        x <- tempfile(fileext = 'Rmd')
        on.exit(unlink(x))
        download.file(file.path(short_goal_web, "CP.Rmd"), x) 
```
 
```{r, child = x, echo=FALSE, results='asis'} 
 
``` 

### Data used in model

**Status & trend**

```{r, echo=FALSE, warning=FALSE, error=FALSE, results="asis"}
st <- layers_csv %>%
  filter(targets=="CP") %>%
  mutate(web_name = gsub(" ", "_", name)) %>%
  mutate(web_name = tolower(web_name)) %>%
  mutate(web_name = gsub("/", "", web_name)) %>%
  mutate(info = sprintf("[%s](%s#%s) (%s): %s", name, layers_web, web_name, layer, description))

cat(paste(st$info, collapse="\n\n"))

```

---- 

## Tourism & Recreation

```{r, echo=FALSE, results='hide'}

        x <- tempfile(fileext = 'Rmd')
        on.exit(unlink(x))
        download.file(file.path(short_goal_web, "TR.Rmd"), x) 
```
 
```{r, child = x, echo=FALSE, results='asis'} 
 
``` 
### Data used in model

**Status & trend**

```{r, echo=FALSE, warning=FALSE, error=FALSE, results="asis"}
st <- layers_csv %>%
  filter(targets=="TR") %>%
  mutate(web_name = gsub(" ", "_", name)) %>%
  mutate(web_name = tolower(web_name)) %>%
  mutate(web_name = gsub("/", "", web_name)) %>%
  mutate(info = sprintf("[%s](%s#%s) (%s): %s", name, layers_web, web_name, layer, description))

cat(paste(st$info, collapse="\n\n"))

```

---- 

## Livelihoods & Economies: Livelihoods

```{r, echo=FALSE, results='hide'}

        x <- tempfile(fileext = 'Rmd')
        on.exit(unlink(x))
        download.file(file.path(short_goal_web, "LIV.Rmd"), x) 
```
 
```{r, child = x, echo=FALSE, results='asis'} 
 
``` 
### Data used in model

**Status & trend**

```{r, echo=FALSE, warning=FALSE, error=FALSE, results="asis"}
st <- layers_csv %>%
  filter(targets=="LIV") %>%
  mutate(web_name = gsub(" ", "_", name)) %>%
  mutate(web_name = tolower(web_name)) %>%
  mutate(web_name = gsub("/", "", web_name)) %>%
  mutate(info = sprintf("[%s](%s#%s) (%s): %s", name, layers_web, web_name, layer, description))

cat(paste(st$info, collapse="\n\n"))

```


---- 

## Livelihoods & Economies: Economies

```{r, echo=FALSE, results='hide'}

        x <- tempfile(fileext = 'Rmd')
        on.exit(unlink(x))
        download.file(file.path(short_goal_web, "ECO.Rmd"), x) 
```
 
```{r, child = x, echo=FALSE, results='asis'} 
 
``` 

### Data used in model

**Status & trend**

```{r, echo=FALSE, warning=FALSE, error=FALSE, results="asis"}
st <- layers_csv %>%
  filter(targets=="ECO") %>%
  mutate(web_name = gsub(" ", "_", name)) %>%
  mutate(web_name = tolower(web_name)) %>%
  mutate(web_name = gsub("/", "", web_name)) %>%
  mutate(info = sprintf("[%s](%s#%s) (%s): %s", name, layers_web, web_name, layer, description))

cat(paste(st$info, collapse="\n\n"))
```

---- 

## Sense of Place: Iconic Species

```{r, echo=FALSE, results='hide'}

        x <- tempfile(fileext = 'Rmd')
        on.exit(unlink(x))
        download.file(file.path(short_goal_web, "ICO.Rmd"), x) 
```
 
```{r, child = x, echo=FALSE, results='asis'} 
 
``` 
### Data used in model

**Status & trend**

```{r, echo=FALSE, warning=FALSE, error=FALSE, results="asis"}
st <- layers_csv %>%
  filter(targets=="ICO") %>%
  mutate(web_name = gsub(" ", "_", name)) %>%
  mutate(web_name = tolower(web_name)) %>%
  mutate(web_name = gsub("/", "", web_name)) %>%
  mutate(info = sprintf("[%s](%s#%s) (%s): %s", name, layers_web, web_name, layer, description))

cat(paste(st$info, collapse="\n\n"))
```

---- 

## Sense of Place: Lasting Special Places

```{r, echo=FALSE, results='hide'}

        x <- tempfile(fileext = 'Rmd')
        on.exit(unlink(x))
        download.file(file.path(short_goal_web, "LSP.Rmd"), x) 
```
 
```{r, child = x, echo=FALSE, results='asis'} 
 
``` 

### Data used in model

**Status & trend**

```{r, echo=FALSE, warning=FALSE, error=FALSE, results="asis"}
st <- layers_csv %>%
  filter(targets=="LSP") %>%
  mutate(web_name = gsub(" ", "_", name)) %>%
  mutate(web_name = tolower(web_name)) %>%
  mutate(web_name = gsub("/", "", web_name)) %>%
  mutate(info = sprintf("[%s](%s#%s) (%s): %s", name, layers_web, web_name, layer, description))

cat(paste(st$info, collapse="\n\n"))

```

---- 

## Clean Waters

```{r, echo=FALSE, results='hide'}

        x <- tempfile(fileext = 'Rmd')
        on.exit(unlink(x))
        download.file(file.path(short_goal_web, "CW.Rmd"), x) 
```
 
```{r, child = x, echo=FALSE, results='asis'} 
 
``` 

### Data used in model

**Status & trend**

```{r, echo=FALSE, warning=FALSE, error=FALSE, results="asis"}
st <- layers_csv %>%
  filter(targets=="CW") %>%
  mutate(web_name = gsub(" ", "_", name)) %>%
  mutate(web_name = tolower(web_name)) %>%
  mutate(web_name = gsub("/", "", web_name)) %>%
  mutate(info = sprintf("[%s](%s#%s) (%s): %s", name, layers_web, web_name, layer, description))

cat(paste(st$info, collapse="\n\n"))

```

---- 

## Biodiversity: Species

```{r, echo=FALSE, results='hide'}

        x <- tempfile(fileext = 'Rmd')
        on.exit(unlink(x))
        download.file(file.path(short_goal_web, "SPP.Rmd"), x) 
```
 
```{r, child = x, echo=FALSE, results='asis'} 
 
``` 

### Data used in model

**Status & trend**

```{r, echo=FALSE, warning=FALSE, error=FALSE, results="asis"}
st <- layers_csv %>%
  filter(targets=="SPP") %>%
  mutate(web_name = gsub(" ", "_", name)) %>%
  mutate(web_name = tolower(web_name)) %>%
  mutate(web_name = gsub("/", "", web_name)) %>%
  mutate(info = sprintf("[%s](%s#%s) (%s): %s", name, layers_web, web_name, layer, description))

cat(paste(st$info, collapse="\n\n"))

```

---- 

## Biodiversity: Habitats

```{r, echo=FALSE, results='hide'}

        x <- tempfile(fileext = 'Rmd')
        on.exit(unlink(x))
        download.file(file.path(short_goal_web, "HAB.Rmd"), x) 
```
 
```{r, child = x, echo=FALSE, results='asis'} 
 
``` 
### Data used in model

**Status & trend**

```{r, echo=FALSE, warning=FALSE, error=FALSE, results="asis"}
st <- layers_csv %>%
  filter(targets=="HAB") %>%
  mutate(web_name = gsub(" ", "_", name)) %>%
  mutate(web_name = tolower(web_name)) %>%
  mutate(web_name = gsub("/", "", web_name)) %>%
  mutate(info = sprintf("[%s](%s#%s) (%s): %s", name, layers_web, web_name, layer, description))

cat(paste(st$info, collapse="\n\n"))

```

