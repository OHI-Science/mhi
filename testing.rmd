---
title: "Preliminary OHI scores"
output:
  html_document:
    toc: true
    toc_float: true
#    keep_md: true
---

```{r setup, echo=FALSE, warning=FALSE, message=FALSE}
source("./_site.R")
```

Ocean Health Index scores are calculated for each region for each goal before being combined into an overall Index score for Hawaii. The four regions are Hawaii, Maui Nui, Oahu, and Kauai & Niihau. <!---could bring back the Regions page to be only linked from here---> 

Flower plots display preliminary scores, with each petal representing an individual goal. Petal lengths convey the score of the goal, thus longer petals are closer to achieving their target. Only goals that are relevant to a region are scored, otherwise they are set to NA with grey petals. All scores are on a scale from 0-100, and the center number is the region's Index score.

----

```{r plot_flower Casey, results='asis'}

## source from ohibc until added to ohicore, see https://github.com/OHI-Science/ohibc/blob/master/regionHoweSound/ohibc_howesound_2016.Rmd
# source('https://raw.githubusercontent.com/OHI-Science/ohibc/master/src/R/common.R')
# source('https://raw.githubusercontent.com/OHI-Science/mhi/master/region2017/plot_flower_local.R')
# 
# ## regions info
# regions <- bind_rows(
#   data_frame(                # order regions to start with whole study_area
#     region_id   = 0,
#     region_name = 'Main Hawaiian Islands'),
#   read_csv(sprintf('%s/spatial/regions_list.csv', dir_scenario)) %>%
#     select(region_id   = rgn_id,
#            region_name = rgn_name))
# 
# ## set figure name
# regions <- regions %>%
#  mutate(flower_png = sprintf('%s/reports/figures/flower_%s.png',
#                              dir_scenario,
#                              str_replace_all(region_name, ' ', '_')))
# 

## display ----

regions <- readr::read_csv(sprintf('%s/reports/figures/regions_figs.csv', dir_scenario)) %>%
  mutate(flower_png_local = flower_png)
# fig_dir_orig <- sprintf('%s/figures', dir_report)

## make sure figures exist
# if (!file.exists()) {

  ## copy figures to gh-branch 
  for (f in regions$flower_png){ # f = regions$flower_png[1]
    file.copy(from = f,
              to   = sprintf('images/%s', basename(f)), overwrite=T)
    
    regions$flower_png_local[regions$flower_png == f] <- sprintf('images/%s', basename(f))
    # cat(sprintf('\n copying from %s', f))
  }

  
  # header, flower
  cat(sprintf('## %s\n\n![](%s)\n\n\n\n', regions$region_name, regions$flower_png_local), 
      sep = "")
# } else { 
  
#   print(sprintf('please check that flower plots were created in the %s branch', gh_branch_data))
# }

```


[<img src="https://docs.google.com/drawings/d/1633uvIYgsBhiKBddQAaTlvYDJgOK1uiDB6wkooNyhFc/pub?w=576&h=288" width="100px">](http://ohi-science.org)  
[ohi-science.org home](http://ohi-science.org)
